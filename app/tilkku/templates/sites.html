{% block content %}
<div class="content" style="height: calc(100% - 20px); overflow-y: clip;">
    <div id="sites-site-box">
        <input id="sites-site-search" class="input is-small" type="text" placeholder="Hae...">
        <table id="sites-site-table" class="table is-striped">
        </table>
    </div>
</div>

<script>
function search_sites() {
    var search = $('#sites-site-search').val();
    $.ajax({
        url: 'api/sites/?name=' + search + '/',
        type: 'GET',
        success: function(data) {
            console.log(data);
            var table = $('#sites-site-table');
            table.html('');
            for (var i = 0; i < data.length; i++) {
                var row = $('<tr>');
                row.append($('<td>').text(data[i].name));
                table.append(row);
            }
        }
    });
}
search_sites();

$("#sites-site-search").on('keyup', function() {
    search_sites();
});
</script>
{% endblock %}